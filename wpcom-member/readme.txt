=== WPCOM Member ===
Contributors: whyun
Donate link: https://www.wpcom.cn/plugins/wpcom-member-pro.html
Tags: 用户中心, membership
Requires at least: 6.2.0
Tested up to: 6.8.1
Stable tag: 1.7.12
License: GPLv2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html

WPCOM Member - User profile & membership plugin for WordPress

== Description ==

WordPress用户中心插件 / User profile & membership plugin for WordPress

### WPCOM用户中心插件

**使用说明**

设置入口：后台**用户中心**

插件使用可以参考（部分功能为高级版或主题内置，免费版会有区别）：<a href="https://www.wpcom.cn/docs/themer/member.html" target="_blank">https://www.wpcom.cn/docs/themer/member.html</a>


**支持功能**

- 前端注册、登录、找回密码页面，注册登录弹框；
- 前端帐号设置页面，可支持个人资料设置、修改密码、头像设置等；
- 前端个人中心页面；
- 社交登录：微信、微博、QQ、Google、Facebook、Twitter、Github;
- 注册登录表单人机验证：集成WPCOM内置人机验证（免费）、阿里云云盾验证码、腾讯云验证码/防水墙、hCaptcha和Google reCAPTCHA安全验证方式；
- 注册邮箱验证；
- 用户黑名单功能；
- WooCommerce兼容；

### 用户中心高级版

高级版购买地址：<a href="https://www.wpcom.cn/plugins/wpcom-member-pro.html" target="_blank">https://www.wpcom.cn/plugins/wpcom-member-pro.html</a>

**高级版功能：**

- 内置订单支付系统，可支持微信支付、支付宝以及虎皮椒支付接口；
- 会员订阅功能；
- 我的钱包功能，可实现余额支付；
- 积分功能；
- 代金券充值功能；
- 付费查看内容、付费阅读全文；
- 付费下载内容；
- 付费复制功能；
- 邀请码注册功能；
- 推荐佣金功能；
- 用户私信功能；
- 用户关注功能；
- 系统通知功能；
- 用户分组功能；
- 手机号注册登录功能；
- 扫码登录功能、微信扫码关注公众号登录；

== Changelog ==

### 更新记录

**1.7.12** - 2025-07-04

- 优化图片裁剪（如头像裁剪）功能：由于浏览器裁剪清晰度失真问题改由服务端处理；

**1.7.11** - 2025-07-02

- 优化新增第三方主题前端登录状态的请求；

**1.7.10** - 2025-05-11

- 优化手机号登录失败问题；
- 优化分页代码；

**1.7.9** - 2025-05-08

- 优化个人中心页面 canonical 地址不对的问题；
- 优化session功能代码；
- 优化手机登录部分功能代码；
- 优化部分css代码；

**1.7.8** - 2025-04-09

- 优化内置滑动验证弹框组件无法弹出的问题；
- 优化`wpcom-member`简码过滤已有参数，避免file参数导致文件包含漏洞风险；

**1.7.7** - 2025-03-13

- 优化session功能代码避免sql注入；
- 优化部分css样式；

**1.7.6** - 2025-02-28

- 优化justnews主题个人中心页视频文章图标显示异常的问题；
- 优化手机短信登录可能存在的安全问题；

**1.7.5** - 2025-02-27

- 优化开启`补充电子邮箱`/`补充手机号码`选项后管理员文章发布权限判断失败的问题；
- 优化`补充电子邮箱`/`补充手机号码`选项后拦截文章类型并可通过filter `wpmx_need_fill_login_post_types` 修改；

**1.7.4** - 2025-02-22

- 优化js提示组件报错的问题；

**1.7.3** - 2025-01-24

- 优化justnews主题可能报错的问题；

**1.7.2** - 2025-01-10

- 优化后台用户列表支持搜索手机号（需要搭配WPCOM主题或者用户中心高级版才有手机号注册登录功能）；
- 优化内置图标库与WPCOM主题图标库版本兼容适配问题；
- 优化开启`补充电子邮箱`/`补充手机号码`选项后管理员或者编辑后台给文章指定作者时被指定作者未完善时不拦截；

**1.7.1** - 2024-12-25

- 优化开启`补充电子邮箱`/`补充手机号码`选项后管理员权限用户未完善邮箱或者手机号码也无法发布内容的情况，调整为拦截没有文章编辑权限的用户

**1.7.0** - 2024-12-24

新增`补充电子邮箱`/`补充手机号码`选项：用户中心-常规设置-注册登录选项（温馨提示：补充手机号码需要使用WPCOM主题或者高级版用户中心插件并且开启手机号码登录功能）：
如果开启了选项则在发布文章、评论、QAPress问答和回答的时候会自动检测是否完善电子邮箱或者手机号，如果没有的话则会拦截无法提交发布。

**1.6.0** - 2024-12-16

- 新增账号设置`昵称`和`个人说明`选项字数限制：用户中心-常规设置-选项设置；
- 新增账号设置`网址选项标题`选项：用户中心-常规设置-选项设置，设置标题后可填写网站地址，会在评论列表用户昵称带上链接地址，适合博客网站使用；
- 优化注册功能，关闭注册后将不可通过社交登录和手机快捷登录进行注册；

**1.5.7** - 2024-12-06

- 优化重置密码邮件发送失败的提示信息；
- 优化部分css代码；
- 优化js代码Modal组件与bootstrap冲突问题；

**1.5.6** - 2024-11-19

- 优化与第三方主题的兼容性；

**1.5.5** - 2024-10-25

- 优化语言包与 WordPress 6.7.0 版本的兼容问题；
- 优化部分css样式异常的问题；

**1.5.4.1** - 2024-09-18

- 修复登录后跳转功能参数`xss`漏洞；

**1.5.4** - 2024-09-14

- 优化登录操作，支持触发内置的 wp_login 钩子；
- 优化多处代码，调整参数过滤方式；

**1.5.3.2** - 2024-09-12

- 优化手机号快捷登录异常的情况；

**1.5.3.1** - 2024-09-10

- 优化内置滑动验证码功能滑块生成出错问题；

**1.5.3** - 2024-09-06

- 修复注册表单安全问题；
- 优化用户列表简码展示：仅展示正常用户，排除小黑屋和待审核用户；
- 优化后台用户列表：增加待审核和小黑屋用户标识；
- 优化多处插件代码；

**1.5.2.1** - 2024-07-30

- 优化第三方主题使用用户中心高级版无法弹出付费框的问题；

**1.5.2** - 2024-07-25

- 优化问答插件兼容性；
- 优化与第三方主题的兼容性；

**1.5.1.4** - 2024-07-23

- 优化微信登录二维码弹框样式异常的问题；

**1.5.1.3** - 2024-07-19

- 优化调整可能引起冲突的class命名；
- 优化部分代码；

**1.5.1.1** / **1.5.1.2** - 2024-07-18

- 优化主题设置不显示用户中心设置入口的问题；
- 优化可能存在的兼容报错的问题；
- 优化Themer框架免费版代码；

**1.5.1** - 2024-07-17

- 修复报错的问题

**1.5.0** - 2024-07-16

- 优化PHP代码

**1.4.0** - 2024-07-03

- 优化注册功能，可支持显示系统hook `registration_errors` 的错误信息；
- 优化JustWeapp小程序登录功能，跳转方式遵循新版小程序设置；
- 安全性更新

**1.3.14** - 2024-06-17

- 新增区块主题菜单`用户中心注册登录`区块支持，可添加注册登录和用户中心入口；
- 优化个人中心页面直接访问时跳转到登录页面；
- 优化微信关注登录功能；

**1.3.13** - 2024-05-31

- 优化与后续WPCOM主题微信关注登录功能的兼容性；

**1.3.12** - 2024-04-28

- 优化样式，与最新版JustNews主题保持风格一致性；

**1.3.11** - 2024-04-24

- 优化样式：兼容Module主题最新版内容圆角半径的设置保持全局风格统一性；
- 优化账号设置页面保存按钮，由小尺寸按钮改为常规尺寸；
- 优化modal弹框样式，增加毛玻璃模糊背景；


**1.3.10** - 2024-04-12

- 新增阿里云验证码2.0支持；
- 优化用户中心单独使用时无法发送验证码更换邮箱的问题；
- 优化插件静态文件本地打包构建工具；

**1.3.9** - 2024-03-04

- 优化绑定邮箱发送验证邮件失败的问题

**1.3.8** - 2024-02-26

- 优化部分样式，比如系统通知的手风琴组件、翻页组件；
- 优化账号设置子页面不存在时标题报错的问题；

**1.3.7** - 2024-02-05

- 优化找回密码步骤展示部分内容移动端样式；
- 优化注册登录表单记住密码checkbox勾选框在第三方主题存在错位的问题；
- 其他细节代码和css样式的调整


**1.3.6**

- 优化`is_wpcom_member_page`方法；
- 优化js `modal` 弹框兼第三方主题的容性；
- 优化 `Easy Table of Contents` 目录插件兼容性，避免个人中心等页面出现目录；

**1.3.5**

- 新增模板文件hook `wpcom_member_load_template`，可自定义替换模板文件;
- 优化账号设置菜单序号，便于添加更多菜单选项；
- 优化细节样式；

**1.3.4**

- 优化PHP兼容性，减少报错提示信息；

**1.3.3**

- 优化社交登录图标展示部分的css样式；
- 优化头像和封面图裁剪功能的提示文字交互效果；
- 优化部分细节代码；

**1.3.2**

- 优化提示组件交互效果和样式；
- 优化更换手机或者邮箱阿里云滑动验证失败的问题；
- 优化框架部分代码；

**1.3.1**

- 新增微信公众号登录`access_token`获取的filter，方便多网站共用的情况下通过filter获取；
- 优化部分PHP代码；
- 优化部分css样式；


**1.3.0**

- 新增第三方主题菜单中可添加用户登录信息入口：`外观-菜单`，左侧**添加菜单项**找到**用户登录信息**，然后添加至菜单最后位置即可；


**1.2.11**

- 优化插件语言包；
- 优化自定义字段保存方式；

**1.2.10**

- 优化第三方主题使用微信登录出错的问题；
- 优化部分弹框关闭功能与bootstrap其他版本冲突失效的问题；
- 优化部分情况下语言包不起作用的问题；
- 优化部分功能代码

**1.2.9**

- 优化文字显示，将“帐号”调整为“账号”；

**1.2.8**

- 优化腾讯云验证码服务接口，根据官方公告已更新最新API地址

**1.2.7**

- 优化内置人机验证功能可能报错的问题；
- 优化头像等字段数据与用户中心高级版插件兼容的问题；
- 优化部分细节css样式；

**1.2.6**

- 优化与其他主题或者插件引入的Bootstrap样式兼容性

**1.2.5**

- 优化无法正常重发激活邮件的问题；
- 优化部分样式与第三方主题的兼容性；

**1.2.4**

- 优化用户中心高级版邀请码注册功能的兼容性；

**1.2.3**

- 优化部分模板文件引用方式，可支持(子)主题自定义模板；
- 优化后台用户列表高级版插件用户开通会员后后台昵称后面可显示会员图标标识；
- 优化帐号设置页面部分选项显示顺序；
- 优化部分css样式；

**1.2.2**

- 新增提示信息UI组件，替代部分弹框场景提升用户使用体验；
- 优化商城和用户中心高级版“我的订单”在帐号设置里面标题图标一样的问题；
- 优化部分内置图标；
- 优化css样式，提高兼容性；

**1.2.1**

- 优化文章和评论获取代码，提高性能

**1.2.0**

- 更新图标库；
- 优化登录样式；
- 优化设置选项样式；


**1.1.7**

- 优化模板文件

**1.1.6**

- 优化内置人机验证功能拼图加载失败的时候使用插件内置的一张默认图片，可在图片服务失效时应急，避免由于图片加载失败导致无法登录的情况出现；默认图片源自 Unsplash

**1.1.5**

- 优化部分内容Loading加载效果


**1.1.4**

- 优化session在最新版Chrome浏览器失效的问题；
- 优化清理伪静态缓存部分的代码；


**1.1.3**

- 优化session对于JustWeapp小程序的兼容性；


**1.1.2**

- 优化微信登录JustNews主题夜间模式的支持；
- 优化内置人机验证拼图功能验证频率限制不生效的问题；
- 优化细节样式；


**1.1.1**

- 优化css样式；
- 优化与后续WPCOM主题版本的兼容性；


**1.1.0**

- 优化帐号设置页面移动端布局，设置菜单上下布局改为左右布局；


**1.0.11**

- 优化内置人机验证功能在移动端滑动会触发返回上一页的问题；
- 优化与后续版本WPCOM主题的兼容性


**1.0.10**

- 优化内置人机验证拼图无法加载的问题：目前picsum.photos国内无法正常访问，替换为unsplash；


**1.0.9**

- 优化后台设置选项依赖的图标库；


== Installation ==

1. From the dashboard of your site, navigate to Plugins –> Add New.
2. Select the Upload option and hit "Choose File".
3. When the popup appears select the "wpcom-member.zip" file from your desktop.
4. Follow the on-screen instructions and wait as the upload completes.
5. When it’s finished, activate the plugin via the prompt. A message will show confirming activation was successful.
